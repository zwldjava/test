test_cases:
  - name: "正常登录"
    feature: "认证"
    story: "登录接口"
    severity: "critical"
    tags: ["smoke", "api", "auth"]
    request:
      method: "POST"
      endpoint: "/auth/login"
      body:
        phone: "18821371697"
        password: "Ww12345678.."
    validations:
      - type: "status_code"
        expected: 200
      - type: "response_code"
        expected: 200
      - type: "message_contains"
        expected: "登录成功"
      - type: "has_token"
        expected: true

  - name: "空请求体"
    feature: "认证"
    story: "登录接口"
    severity: "critical"
    tags: ["smoke", "api", "auth"]
    request:
      method: "POST"
      endpoint: "/auth/login"
      body:
        phone: ""
        password: ""
    validations:
      - type: "status_code"
        expected: 200
      - type: "response_code"
        expected: 400
      - type: "message_contains"
        expected: "密码不能为空"

  - name: "只有手机号"
    feature: "认证"
    story: "登录接口"
    severity: "critical"
    tags: ["smoke", "api", "auth"]
    request:
      method: "POST"
      endpoint: "/auth/login"
      body:
        phone: "18821371697"
        password: ""
    validations:
      - type: "status_code"
        expected: 200
      - type: "response_code"
        expected: 400
      - type: "message_contains"
        expected: "密码不能为空"

  - name: "只有密码"
    feature: "认证"
    story: "登录接口"
    severity: "critical"
    tags: ["smoke", "api", "auth"]
    request:
      method: "POST"
      endpoint: "/auth/login"
      body:
        phone: ""
        password: "test123"
    validations:
      - type: "status_code"
        expected: 200
      - type: "response_code"
        expected: 400
      - type: "message_contains"
        expected: "手机号或用户名不能为空"

  - name: "错误凭据"
    feature: "认证"
    story: "登录接口"
    severity: "critical"
    tags: ["smoke", "api", "auth"]
    request:
      method: "POST"
      endpoint: "/auth/login"
      body:
        phone: "18821371697"
        password: "wrongpassword"
    validations:
      - type: "status_code"
        expected: 200
      - type: "response_code"
        expected: 401
      - type: "message_contains"
        expected: "手机号或密码错误"

  - name: "SQL注入攻击"
    feature: "认证"
    story: "登录接口"
    severity: "critical"
    tags: ["smoke", "api", "auth", "security"]
    request:
      method: "POST"
      endpoint: "/auth/login"
      body:
        phone: "admin' OR '1'='1"
        password: "anything"
    validations:
      - type: "status_code"
        expected: 200
      - type: "response_code"
        expected: 401
      - type: "message_contains"
        expected: "手机号或密码错误"
      - type: "security_check"
        check_type: "sql_injection"
        field: "phone"

  - name: "XSS攻击"
    feature: "认证"
    story: "登录接口"
    severity: "critical"
    tags: ["smoke", "api", "auth", "security"]
    request:
      method: "POST"
      endpoint: "/auth/login"
      body:
        phone: "<script>alert('xss')</script>"
        password: "test"
    validations:
      - type: "status_code"
        expected: 200
      - type: "response_code"
        expected: 401
      - type: "message_contains"
        expected: "手机号或密码错误"
      - type: "security_check"
        check_type: "xss"
        field: "phone"

  - name: "超长用户名"
    feature: "认证"
    story: "登录接口"
    severity: "normal"
    tags: ["smoke", "api", "auth"]
    request:
      method: "POST"
      endpoint: "/auth/login"
      body:
        phone: "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"
        password: "test"
    validations:
      - type: "status_code"
        expected: 200
      - type: "response_code"
        expected: 401
      - type: "message_contains"
        expected: "手机号或密码错误"

  - name: "响应时间测试"
    feature: "认证"
    story: "登录接口"
    severity: "normal"
    tags: ["smoke", "api", "auth", "performance"]
    request:
      method: "POST"
      endpoint: "/auth/login"
      body:
        phone: "18821371697"
        password: "Ww12345678.."
    iterations: 5
    validations:
      - type: "response_time"
        max_avg_time: 2000
        max_time: 5000

  - name: "并发登录请求"
    feature: "认证"
    story: "登录接口"
    severity: "normal"
    tags: ["smoke", "api", "auth", "concurrent"]
    request:
      method: "POST"
      endpoint: "/auth/login"
      body:
        phone: "18821371697"
        password: "Ww12345678.."
    concurrent_count: 10
    validations:
      - type: "concurrent_success"
        expected_success_count: 10
