{"name": "缺少认证信息", "status": "failed", "statusDetails": {"message": "AssertionError: 状态码应该为200，实际为401\nassert 401 == 200\n +  where 401 = <Response [401]>.status_code", "trace": "self = <api_test_framework.tests.api.test_wo_api.TestWoAPI object at 0x000001DB6C90A210>\ntest_case_index = 1\n\n    @pytest.mark.parametrize(\"test_case_index\", range(12))\n    def test_wo_api(self, test_case_index):\n        test_case = self.test_cases[test_case_index]\n    \n        allure.dynamic.feature(test_case[\"feature\"])\n        allure.dynamic.story(test_case[\"story\"])\n        allure.dynamic.severity(getattr(allure.severity_level, test_case[\"severity\"].upper()))\n        allure.dynamic.title(test_case[\"name\"])\n    \n        for tag in test_case.get(\"tags\", []):\n            allure.dynamic.tag(tag)\n    \n        with allure.step(f\"测试用例: {test_case['name']}\"):\n            with allure.step(\"发送请求\"):\n                response = self._execute_request(test_case[\"request\"])\n                self._attach_data(response, test_case[\"request\"])\n    \n            with allure.step(\"验证响应\"):\n>               self._run_validations(response, test_case[\"request\"], test_case[\"validations\"])\n\ntests\\api\\test_wo_api.py:174: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <api_test_framework.tests.api.test_wo_api.TestWoAPI object at 0x000001DB6C90A210>\nresponse = <Response [401]>\nrequest_data = {'body': {'attachs': [], 'description': '工单说明\\n', 'extra_data': {'completion_days': '12', 'items': [{'booking_time': 1...}], 'need_group': 1, 'platform': 'taobao', ...}, 'template_id': 1}, 'endpoint': '/wo', 'headers': {}, 'method': 'POST'}\nvalidations = [{'expected': 200, 'type': 'status_code'}, {'expected': 401, 'type': 'response_code'}, {'expected': '缺少认证信息', 'type': 'message_contains'}]\n\n    def _run_validations(self, response, request_data, validations):\n        for validation in validations:\n            validation_type = validation[\"type\"]\n    \n            if validation_type == \"status_code\":\n>               self._validate_status_code(response, validation[\"expected\"])\n\ntests\\api\\test_wo_api.py:120: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <api_test_framework.tests.api.test_wo_api.TestWoAPI object at 0x000001DB6C90A210>\nresponse = <Response [401]>, expected = 200\n\n    def _validate_status_code(self, response, expected):\n>       assert response.status_code == expected, f\"状态码应该为{expected}，实际为{response.status_code}\"\nE       AssertionError: 状态码应该为200，实际为401\nE       assert 401 == 200\nE        +  where 401 = <Response [401]>.status_code\n\ntests\\api\\test_wo_api.py:43: AssertionError"}, "steps": [{"name": "测试用例: 缺少认证信息", "status": "failed", "statusDetails": {"message": "AssertionError: 状态码应该为200，实际为401\nassert 401 == 200\n +  where 401 = <Response [401]>.status_code\n", "trace": "  File \"D:\\code\\test\\api_test_framework\\tests\\api\\test_wo_api.py\", line 174, in test_wo_api\n    self._run_validations(response, test_case[\"request\"], test_case[\"validations\"])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\code\\test\\api_test_framework\\tests\\api\\test_wo_api.py\", line 120, in _run_validations\n    self._validate_status_code(response, validation[\"expected\"])\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\code\\test\\api_test_framework\\tests\\api\\test_wo_api.py\", line 43, in _validate_status_code\n    assert response.status_code == expected, f\"状态码应该为{expected}，实际为{response.status_code}\"\n"}, "steps": [{"name": "发送请求", "status": "passed", "attachments": [{"name": "响应内容", "source": "21c5876b-8adf-4c0a-9097-3aa9c9bbe071-attachment.txt", "type": "text/plain"}, {"name": "请求数据", "source": "a3ca142f-f9f5-4d06-8c25-09b676a46652-attachment.json", "type": "application/json"}], "start": 1767014634030, "stop": 1767014634317}, {"name": "验证响应", "status": "failed", "statusDetails": {"message": "AssertionError: 状态码应该为200，实际为401\nassert 401 == 200\n +  where 401 = <Response [401]>.status_code\n", "trace": "  File \"D:\\code\\test\\api_test_framework\\tests\\api\\test_wo_api.py\", line 174, in test_wo_api\n    self._run_validations(response, test_case[\"request\"], test_case[\"validations\"])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\code\\test\\api_test_framework\\tests\\api\\test_wo_api.py\", line 120, in _run_validations\n    self._validate_status_code(response, validation[\"expected\"])\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"D:\\code\\test\\api_test_framework\\tests\\api\\test_wo_api.py\", line 43, in _validate_status_code\n    assert response.status_code == expected, f\"状态码应该为{expected}，实际为{response.status_code}\"\n"}, "start": 1767014634317, "stop": 1767014634318}], "start": 1767014634030, "stop": 1767014634320}], "attachments": [{"name": "失败信息", "source": "29a7259b-c69a-45b5-b837-92fa2dc1b896-attachment.txt", "type": "text/plain"}], "parameters": [{"name": "test_case_index", "value": "1"}], "start": 1767014634030, "stop": 1767014634321, "uuid": "46da54ae-0f7f-48c0-ace4-b7398588a329", "historyId": "297c75c4b05a0ed8ba0983971e925414", "testCaseId": "5669fa0d7c46f548df7397704e776171", "fullName": "tests.api.test_wo_api.TestWoAPI#test_wo_api", "labels": [{"name": "feature", "value": "工单管理"}, {"name": "story", "value": "创建工单接口"}, {"name": "severity", "value": "critical"}, {"name": "tag", "value": "smoke"}, {"name": "tag", "value": "api"}, {"name": "tag", "value": "wo"}, {"name": "tag", "value": "auth"}, {"name": "tag", "value": "wo"}, {"name": "tag", "value": "api"}, {"name": "tag", "value": "smoke"}, {"name": "parentSuite", "value": "tests.api"}, {"name": "suite", "value": "test_wo_api"}, {"name": "subSuite", "value": "TestWoAPI"}, {"name": "host", "value": "lianxiang"}, {"name": "thread", "value": "8504-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "tests.api.test_wo_api"}]}