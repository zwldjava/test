self = <api_test_framework.tests.api.test_wo_api.TestWoAPI object at 0x000001EE40DF4F50>
test_case_index = 7

    @pytest.mark.parametrize("test_case_index", range(12))
    def test_wo_api(self, test_case_index):
        test_case = self.test_cases[test_case_index]
    
        allure.dynamic.feature(test_case["feature"])
        allure.dynamic.story(test_case["story"])
        allure.dynamic.severity(getattr(allure.severity_level, test_case["severity"].upper()))
        allure.dynamic.title(test_case["name"])
    
        for tag in test_case.get("tags", []):
            allure.dynamic.tag(tag)
    
        with allure.step(f"测试用例: {test_case['name']}"):
            with allure.step("发送请求"):
                response = self._execute_request(test_case["request"])
                self._attach_data(response, test_case["request"])
    
            with allure.step("验证响应"):
>               self._run_validations(response, test_case["request"], test_case["validations"])

tests\api\test_wo_api.py:174: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <api_test_framework.tests.api.test_wo_api.TestWoAPI object at 0x000001EE40DF4F50>
response = <Response [200]>
request_data = {'body': {'attachs': [], 'description': '工单说明\n', 'extra_data': {'completion_days': '12', 'items': [], 'need_group': 1...'taobao', ...}, 'template_id': 1}, 'endpoint': '/wo', 'headers': {'Authorization': 'Bearer {token}'}, 'method': 'POST'}
validations = [{'expected': 200, 'type': 'status_code'}, {'expected': 200, 'type': 'response_code'}, {'expected': '创建成功', 'type': 'message_contains'}]

    def _run_validations(self, response, request_data, validations):
        for validation in validations:
            validation_type = validation["type"]
    
            if validation_type == "status_code":
                self._validate_status_code(response, validation["expected"])
            elif validation_type == "response_code":
>               self._validate_response_code(response, validation["expected"])

tests\api\test_wo_api.py:122: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <api_test_framework.tests.api.test_wo_api.TestWoAPI object at 0x000001EE40DF4F50>
response = <Response [200]>, expected = 200

    def _validate_response_code(self, response, expected):
        response_data = response.json()
>       assert response_data["code"] == expected, f"响应码应该为{expected}，实际为{response_data['code']}"
E       AssertionError: 响应码应该为200，实际为400
E       assert 400 == 200

tests\api\test_wo_api.py:47: AssertionError