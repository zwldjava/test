# 优化 test_login_api.py 的计划

## 目标
重构 test_login_api.py，消除冗余代码，提高测试效率和可维护性。

## 具体改进方案

### 1. 优化数据加载方式
- 在测试类初始化时一次性加载所有登录测试数据
- 避免每个测试方法都重复调用 data_reader.get_login_data()

### 2. 使用参数化测试
- 将相似的测试场景合并为参数化测试
- 减少重复的测试代码结构
- 提高测试的可读性和可维护性

### 3. 提取公共测试逻辑
- 将重复的测试步骤（发送请求、验证响应）提取为辅助方法
- 减少代码重复，提高复用性

### 4. 改进测试报告
- 保持 allure 报告的详细性和可读性
- 通过动态参数生成更有意义的测试标题

## 实施步骤
1. 重构 TestLoginAPI 类，添加 setup_class 方法一次性加载数据
2. 将相似测试场景合并为参数化测试
3. 提取公共测试逻辑为辅助方法
4. 验证重构后的测试仍然全部通过

## 预期效果
- 代码行数减少约 50%
- 测试执行效率提高
- 更易于维护和扩展新的测试场景